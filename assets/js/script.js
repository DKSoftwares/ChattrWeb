$(document).ready(function(){function k(){c=io.connect("https://dks-chattr-gitwebserver.herokuapp.com");c.on("login",function(a){e&&(d=a)});c.on("update",function(a,b){e&&(h(),$(".chat").append('<li class="info" style="background-color: '+b+'">'+a+"</li>"),f&&g())});c.on("chat",function(a,b,c){if(e){var d=new Date;h();$(".chat").append('<li class="other"><div class="msg"><span style="color: '+c+'">'+a+":</span><p>"+b+"</p><time>"+d.getHours()+":"+d.getMinutes()+"</time></div></li>");f&&g()}})}function h(){var a=
document.getElementById("pnlMsg");f=a.scrollHeight-a.scrollTop==a.clientHeight?!0:!1}function g(){var a=document.getElementById("pnlMsg");a.scrollTop=a.scrollHeight}var c=null,e=!1,d="",f=!1;$("#submit").submit(function(a){a.preventDefault();k();$("#login").fadeOut();$("#chat").fadeIn();a=$("#nickname").val();var b=new Date;$("#name").html(a);$("#time").html("\u00daltima mensagem: "+b.getHours()+":"+b.getMinutes());e=!0;c.emit("join",a);g()});$("#textarea").keypress(function(a){if(13==a.which&&(a=
$("#textarea").val())&&a.replace(/\s/g,"").length){$("#textarea").val("");var b=new Date;h();$(".chat").append('<li class="self"><div class="msg"><span style="color: '+d+'; font-weight: bold">'+$("#nickname").val()+":</span><p>"+a+"</p><time>"+b.getHours()+":"+b.getMinutes()+"</time></div></li>");c.emit("send",a);f&&g()}})});
